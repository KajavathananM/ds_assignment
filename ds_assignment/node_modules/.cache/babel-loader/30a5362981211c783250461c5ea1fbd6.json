{"ast":null,"code":"import axios from 'axios';\nlet data = '';\nlet c = '';\nlet accId = '';\n\nconst validate = (id, card, amount) => {\n  console.log(id);\n  console.log(amount);\n  console.log(card);\n  console.log(card.credit);\n  axios.get('http://localhost:5000/acc/accounts').then(res => {\n    data = res.data;\n    console.log(data);\n    console.log(typeof data);\n    console.log(data.length);\n    alert(\"Verifying....\");\n\n    while (data.length !== 0) {\n      c = data.pop().Card;\n      accId = data.pop()._id;\n      console.log(data.length);\n      console.log(c);\n      console.log(c.cardNo);\n\n      if (c.cardNo === card.credit) {\n        withdraw(id, amount, accId);\n      }\n    }\n  }).catch(err => console.error(err));\n};\n\nconst withdraw = (id, amount) => {\n  console.log(id);\n  console.log(accId);\n  alert(\"Withdrawal amount is \" + amount); // axios.get('http://localhost:5000/acc/'+accId)\n  //     .then(res => {\n  //         let details = res.data.pop();\n  //         console.log(details);\n  //     });\n\n  axios.put('http://localhost:5000/citizen/' + id).then(res => {\n    return res.data;\n  }).catch(err => {\n    console.error(err);\n  });\n  alert(\"Payment Successful\");\n}; // const sendEmail=(message)=>{\n//     console.log(message)\n// };\n\n\nexport default validate;","map":{"version":3,"sources":["C:\\Users\\User\\WebstormProjects\\ds_assignment\\src\\api\\Service\\CreditService.js"],"names":["axios","data","c","accId","validate","id","card","amount","console","log","credit","get","then","res","length","alert","pop","Card","_id","cardNo","withdraw","catch","err","error","put"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAIC,IAAI,GAAC,EAAT;AACA,IAAIC,CAAC,GAAC,EAAN;AACA,IAAIC,KAAK,GAAC,EAAV;;AAEE,MAAOC,QAAQ,GAAE,CAACC,EAAD,EAAIC,IAAJ,EAASC,MAAT,KAAkB;AAC/BC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,EAAZ;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACI,MAAjB;AACAV,EAAAA,KAAK,CAACW,GAAN,CAAU,oCAAV,EACKC,IADL,CACUC,GAAG,IAAI;AAEPZ,IAAAA,IAAI,GAAGY,GAAG,CAACZ,IAAX;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAQR,IAApB;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAYR,IAAI,CAACa,MAAjB;AAGAC,IAAAA,KAAK,CAAC,eAAD,CAAL;;AACA,WAAMd,IAAI,CAACa,MAAL,KAAgB,CAAtB,EAAwB;AACpBZ,MAAAA,CAAC,GAACD,IAAI,CAACe,GAAL,GAAWC,IAAb;AACAd,MAAAA,KAAK,GAACF,IAAI,CAACe,GAAL,GAAWE,GAAjB;AACAV,MAAAA,OAAO,CAACC,GAAR,CAAYR,IAAI,CAACa,MAAjB;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAYP,CAAZ;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAYP,CAAC,CAACiB,MAAd;;AAEA,UAAGjB,CAAC,CAACiB,MAAF,KAAab,IAAI,CAACI,MAArB,EACA;AACIU,QAAAA,QAAQ,CAACf,EAAD,EAAIE,MAAJ,EAAWJ,KAAX,CAAR;AACH;AACJ;AAEN,GAvBL,EAuBOkB,KAvBP,CAuBaC,GAAG,IAAEd,OAAO,CAACe,KAAR,CAAcD,GAAd,CAvBlB;AAyBL,CA9BC;;AAgCF,MAAMF,QAAQ,GAAC,CAACf,EAAD,EAAIE,MAAJ,KAAa;AACxBC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,EAAZ;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYN,KAAZ;AACAY,EAAAA,KAAK,CAAC,0BAAwBR,MAAzB,CAAL,CAHwB,CAKxB;AACA;AACA;AACA;AACA;;AAGAP,EAAAA,KAAK,CAACwB,GAAN,CAAU,mCAAiCnB,EAA3C,EACKO,IADL,CACUC,GAAG,IAAI;AACT,WAAOA,GAAG,CAACZ,IAAX;AACH,GAHL,EAGOoB,KAHP,CAGaC,GAAG,IAAG;AACfd,IAAAA,OAAO,CAACe,KAAR,CAAcD,GAAd;AACH,GALD;AAMAP,EAAAA,KAAK,CAAC,oBAAD,CAAL;AACH,CAnBD,C,CAqBA;AACA;AACA;;;AAEA,eAAeX,QAAf","sourcesContent":["import axios from 'axios'\r\n\r\nlet data='';\r\nlet c='';\r\nlet accId='';\r\n\r\n  const  validate =(id,card,amount)=>{\r\n      console.log(id);\r\n      console.log(amount);\r\n      console.log(card);\r\n      console.log(card.credit);\r\n      axios.get('http://localhost:5000/acc/accounts')\r\n          .then(res => {\r\n\r\n                data = res.data;\r\n                console.log(data);\r\n                console.log(typeof  data);\r\n                console.log(data.length);\r\n\r\n\r\n                alert(\"Verifying....\");\r\n                while(data.length !== 0){\r\n                    c=data.pop().Card;\r\n                    accId=data.pop()._id;\r\n                    console.log(data.length);\r\n                    console.log(c);\r\n                    console.log(c.cardNo);\r\n\r\n                    if(c.cardNo === card.credit)\r\n                    {\r\n                        withdraw(id,amount,accId);\r\n                    }\r\n                }\r\n\r\n          }).catch(err=>console.error(err));\r\n\r\n};\r\n\r\nconst withdraw=(id,amount)=>{\r\n    console.log(id);\r\n    console.log(accId);\r\n    alert(\"Withdrawal amount is \"+amount);\r\n\r\n    // axios.get('http://localhost:5000/acc/'+accId)\r\n    //     .then(res => {\r\n    //         let details = res.data.pop();\r\n    //         console.log(details);\r\n    //     });\r\n\r\n\r\n    axios.put('http://localhost:5000/citizen/'+id)\r\n        .then(res => {\r\n            return res.data;\r\n        }).catch(err =>{\r\n        console.error(err);\r\n    });\r\n    alert(\"Payment Successful\")\r\n};\r\n\r\n// const sendEmail=(message)=>{\r\n//     console.log(message)\r\n// };\r\n\r\nexport default validate;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}