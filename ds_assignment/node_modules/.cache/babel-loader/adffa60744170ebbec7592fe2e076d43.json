{"ast":null,"code":"import axios from 'axios';\n\nvar nodemailer = require('nodemailer');\n\nlet data = '';\nlet c = '';\n\nconst validate = (id, card, amount) => {\n  console.log(id);\n  console.log(amount);\n  console.log(card);\n  console.log(card.credit);\n  axios.get('http://localhost:5000/acc/accounts').then(res => {\n    data = res.data;\n    console.log(data);\n    console.log(typeof data);\n    console.log(data.length);\n    alert(\"Verifying....\");\n\n    while (data.length !== 0) {\n      c = data.pop().Card;\n      console.log(data.length);\n      console.log(c);\n      console.log(c.cardNo);\n\n      if (c.cardNo === card.credit) {\n        withdraw(id, amount);\n      }\n    }\n  }).catch(err => console.error(err));\n};\n\nconst withdraw = (id, amount) => {\n  console.log(id);\n  alert(\"Withdrawal amount is \" + amount);\n  axios.put('http://localhost:5000/citizen/' + id).then(res => {\n    console.log(res.data);\n  }).catch(err => {\n    console.error(err);\n  }).then(alert(\"Payment successful\")).then(sendEmail(\"Payment Sucessful\"));\n};\n\nconst sendEmail = message => {\n  var transporter = nodemailer.createTransport({\n    service: 'gmail',\n    auth: {\n      user: 'mkvathanan@gmail.com',\n      pass: 'Vathanan123'\n    }\n  });\n  const mailOptions = {\n    from: 'mkvathanan@gmail.com',\n    // sender address\n    to: 'm.kajavathanan@yahoo.com',\n    // list of receivers\n    subject: 'Confirm Railway appointment',\n    // Subject line\n    html: '<p>{message}</p>' // plain text body\n\n  };\n  transporter.sendMail(mailOptions, function (err, info) {\n    if (err) console.log(err);else console.log(info);\n  });\n};\n\nexport default validate;","map":{"version":3,"sources":["C:\\Users\\User\\WebstormProjects\\ds_assignment\\src\\api\\Service\\CreditService.js"],"names":["axios","nodemailer","require","data","c","validate","id","card","amount","console","log","credit","get","then","res","length","alert","pop","Card","cardNo","withdraw","catch","err","error","put","sendEmail","message","transporter","createTransport","service","auth","user","pass","mailOptions","from","to","subject","html","sendMail","info"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\n\r\nvar nodemailer = require('nodemailer');\r\n\r\nlet data='';\r\nlet c='';\r\n\r\n  const  validate =(id,card,amount)=>{\r\n      console.log(id);\r\n      console.log(amount);\r\n      console.log(card);\r\n      console.log(card.credit);\r\n      axios.get('http://localhost:5000/acc/accounts')\r\n          .then(res => {\r\n\r\n                data = res.data;\r\n                console.log(data);\r\n                console.log(typeof  data);\r\n                console.log(data.length);\r\n\r\n\r\n                alert(\"Verifying....\");\r\n                while(data.length !== 0){\r\n                    c=data.pop().Card;\r\n                    console.log(data.length);\r\n                    console.log(c);\r\n                    console.log(c.cardNo);\r\n\r\n                    if(c.cardNo === card.credit)\r\n                    {\r\n                        withdraw(id,amount);\r\n                    }\r\n                }\r\n\r\n          }).catch(err=>console.error(err));\r\n\r\n};\r\n\r\nconst withdraw=(id,amount)=>{\r\n    console.log(id);\r\n\r\n    alert(\"Withdrawal amount is \"+amount);\r\n\r\n    axios.put('http://localhost:5000/citizen/'+id)\r\n        .then(res => {\r\n            console.log(res.data);\r\n        }).catch(err =>{\r\n        console.error(err);\r\n    }).then(\r\n\r\n        alert(\"Payment successful\")\r\n\r\n    ).then(\r\n        sendEmail(\"Payment Sucessful\")\r\n    );\r\n\r\n};\r\n\r\nconst sendEmail=(message)=>{\r\n    var transporter = nodemailer.createTransport({\r\n        service: 'gmail',\r\n        auth: {\r\n            user: 'mkvathanan@gmail.com',\r\n            pass: 'Vathanan123'\r\n        }\r\n    });\r\n\r\n    const mailOptions = {\r\n        from: 'mkvathanan@gmail.com', // sender address\r\n        to: 'm.kajavathanan@yahoo.com', // list of receivers\r\n        subject: 'Confirm Railway appointment', // Subject line\r\n        html: '<p>{message}</p>'// plain text body\r\n    };\r\n\r\n    transporter.sendMail(mailOptions, function (err, info) {\r\n        if(err)\r\n            console.log(err);\r\n        else\r\n            console.log(info);\r\n    });\r\n};\r\n\r\nexport default validate;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}